<div class="comum_modal-backdrop" *ngIf="isOpen" (click)="close()"></div>

<div class="comum_modal bg-light" *ngIf="isOpen">
  <div class="comum_modal-header">
    <h2>Cadastro</h2>
    <button class="btn" (click)="close()">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="23"
        height="23"
        fill="currentColor"
        class="bi bi-x-circle"
        viewBox="0 0 16 16"
      >
        <path
          d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"
        />
        <path
          d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"
        />
      </svg>
    </button>
  </div>
  <div class="comum_modal-body">
    <form
      [formGroup]="cadUsuarioForm"
      (ngSubmit)="onSubmit()"
      class="cadastro-usuario bg-light"
      novalidate
    >
      <!-- Nome -->
      <div class="campo-cadastro">
        <label for="nome">Nome:</label>
        <input
          id="nome"
          type="text"
          class="form-control"
          placeholder="Insira o Nome"
          aria-label="Insira o Nome"
          formControlName="nome"
        />
        <small
          *ngIf="
            cadUsuarioForm.get('nome')?.invalid &&
            cadUsuarioForm.get('nome')?.touched
          "
        >
          Nome é obrigatório.
        </small>
      </div>

      <!-- Email -->
      <div class="campo-cadastro">
        <label for="email">Email:</label>
        <div class="input-group mb-2">
          <input
            id="email"
            type="email"
            class="form-control"
            placeholder="Insira o Email"
            aria-label="Insira o Email"
            aria-describedby="basic-addon2"
            formControlName="email"
          />
          <span class="input-group-text" id="basic-addon2"
            >&#64;exemplo.com</span
          >
        </div>
        <small
          *ngIf="
            cadUsuarioForm.get('email')?.invalid &&
            cadUsuarioForm.get('email')?.touched
          "
        >
          Digite um email válido.
        </small>
      </div>

      <!-- Senha -->
      <div class="campo-cadastro">
        <label for="senha">Senha:</label>
        <input
          id="senha"
          type="password"
          class="form-control"
          placeholder="Insira a Senha"
          aria-label="Insira a Senha"
          formControlName="senha"
        />
        <small
          *ngIf="
            cadUsuarioForm.get('senha')?.invalid &&
            cadUsuarioForm.get('senha')?.touched
          "
        >
          Senha é obrigatória.
        </small>
      </div>

      <!-- Tipo de Usuário -->
      <div class="campo-cadastro">
        <label for="tipoUsuario">Tipo Usuário:</label>
        <select
          id="tipoUsuario"
          class="form-select mb-2"
          aria-label="Default select example"
          formControlName="tipoUsuario"
        >
          <option value="" disabled selected>
            Selecione o tipo do usuario
          </option>
          <option value="CLIENTE">Cliente</option>
          <option value="FUNCIONARIO">Funcionário</option>
        </select>
        <small
          *ngIf="
            cadUsuarioForm.get('tipoUsuario')?.invalid &&
            cadUsuarioForm.get('tipoUsuario')?.touched
          "
        >
          Tipo de usuário é obrigatório.
        </small>
      </div>

      <!-- Botões -->
      <div class="action">
        <button class="btn btn-danger" type="button" (click)="close()">
          Cancelar
        </button>
        <button class="btn btn-success" type="submit">Cadastrar</button>
      </div>
    </form>
  </div>
</div>

<!-- Modal -->
<div
  class="comum_modal-backdrop"
  *ngIf="successModalOpen"
  (click)="closeSuccess()"
></div>

<div class="comum_modal bg-light" *ngIf="successModalOpen">
  <div class="comum_modal-header">
    <h2>Sucesso!</h2>
    <button class="btn" (click)="closeSuccess()">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="23"
        height="23"
        fill="currentColor"
        class="bi bi-x-circle"
        viewBox="0 0 16 16"
      >
        <path
          d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"
        />
        <path
          d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"
        />
      </svg>
    </button>
  </div>
  <div class="comum_modal-body">Usuário deletado com sucesso!</div>
  <div class="modal-footer">
    <button class="btn btn-primary" (click)="closeSuccess()">Fechar</button>
  </div>
</div>
